{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/vinitha/Desktop/RegAI/frontend/src/app/components/RegulatorySummary.tsx"],"sourcesContent":["import { FileText } from 'lucide-react';\nimport { RegulatorySummary as SummaryType } from '@/app/lib/types';\n\nconst FallbackText = () => (\n    <span className=\"italic text-gray-400\">Analysis did not provide this information.</span>\n);\n\nexport const RegulatorySummary = ({ summary }: { summary: SummaryType }) => (\n  <div className=\"bg-white p-6 rounded-lg shadow-md border border-gray-200\">\n    <h2 className=\"text-2xl font-bold text-gray-800 mb-4 flex items-center\">\n      <FileText className=\"mr-3 text-blue-600\" /> Regulatory Summary\n    </h2>\n    <div className=\"space-y-4 text-gray-700\">\n      <div>\n        <h3 className=\"font-semibold text-lg text-gray-800\">Purpose</h3>\n        {/* Use optional chaining and a fallback component */}\n        <p>{summary?.purpose || <FallbackText />}</p>\n      </div>\n      <div>\n        <h3 className=\"font-semibold text-lg text-gray-800\">Scope</h3>\n        <p>{summary?.scope || <FallbackText />}</p>\n      </div>\n      <div>\n        <h3 className=\"font-semibold text-lg text-gray-800\">Why It Matters</h3>\n        <p>{summary?.relevance || <FallbackText />}</p>\n      </div>\n    </div>\n  </div>\n);"],"names":[],"mappings":";;;;AAAA;;;AAGA,MAAM,eAAe,kBACjB,6LAAC;QAAK,WAAU;kBAAuB;;;;;;KADrC;AAIC,MAAM,oBAAoB,CAAC,EAAE,OAAO,EAA4B,iBACrE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;;kCACZ,6LAAC,iNAAA,CAAA,WAAQ;wBAAC,WAAU;;;;;;oBAAuB;;;;;;;0BAE7C,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAAsC;;;;;;0CAEpD,6LAAC;0CAAG,SAAS,yBAAW,6LAAC;;;;;;;;;;;;;;;;kCAE3B,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAAsC;;;;;;0CACpD,6LAAC;0CAAG,SAAS,uBAAS,6LAAC;;;;;;;;;;;;;;;;kCAEzB,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAAsC;;;;;;0CACpD,6LAAC;0CAAG,SAAS,2BAAa,6LAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAjBtB","debugId":null}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///Users/vinitha/Desktop/RegAI/frontend/src/app/components/ImpactAssessment.tsx"],"sourcesContent":["import { AlertTriangle, Info } from 'lucide-react';\nimport { ImpactAssessment as AssessmentType } from '@/app/lib/types';\n\nexport const ImpactAssessment = ({ assessment }: { assessment: AssessmentType }) => {\n  // Defensive check: Ensure assessment and affectedAreas exist and have content\n  const hasContent = assessment?.affectedAreas && assessment.affectedAreas.length > 0;\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md border border-gray-200\">\n      <h2 className=\"text-2xl font-bold text-gray-800 mb-4 flex items-center\">\n        <AlertTriangle className=\"mr-3 text-yellow-500\" /> Preliminary Impact Assessment\n      </h2>\n      <p className=\"text-gray-600 italic mb-6\">\n        {assessment?.introduction || \"An analysis of potential operational impacts.\"}\n      </p>\n      <div className=\"space-y-4\">\n        {hasContent ? (\n          assessment.affectedAreas.map((item, index) => (\n            <div key={`${item.area}-${index}`} className=\"border-l-4 border-yellow-500 pl-4\">\n              <h3 className=\"font-semibold text-lg text-gray-800\">{item.area}</h3>\n              <p className=\"text-gray-700\">\n                {/* Provide a fallback for the impact description itself */}\n                {item.impact || <span className=\"italic text-gray-400\">No description provided.</span>}\n              </p>\n            </div>\n          ))\n        ) : (\n          <div className=\"flex items-center text-gray-500\">\n            <Info className=\"w-5 h-5 mr-2 shrink-0\"/>\n            <p>No specific impact areas were identified in the analysis.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;AAAA;AAAA;;;AAGO,MAAM,mBAAmB,CAAC,EAAE,UAAU,EAAkC;IAC7E,8EAA8E;IAC9E,MAAM,aAAa,YAAY,iBAAiB,WAAW,aAAa,CAAC,MAAM,GAAG;IAElF,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;;kCACZ,6LAAC,2NAAA,CAAA,gBAAa;wBAAC,WAAU;;;;;;oBAAyB;;;;;;;0BAEpD,6LAAC;gBAAE,WAAU;0BACV,YAAY,gBAAgB;;;;;;0BAE/B,6LAAC;gBAAI,WAAU;0BACZ,aACC,WAAW,aAAa,CAAC,GAAG,CAAC,CAAC,MAAM,sBAClC,6LAAC;wBAAkC,WAAU;;0CAC3C,6LAAC;gCAAG,WAAU;0CAAuC,KAAK,IAAI;;;;;;0CAC9D,6LAAC;gCAAE,WAAU;0CAEV,KAAK,MAAM,kBAAI,6LAAC;oCAAK,WAAU;8CAAuB;;;;;;;;;;;;uBAJjD,GAAG,KAAK,IAAI,CAAC,CAAC,EAAE,OAAO;;;;8CASnC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,qMAAA,CAAA,OAAI;4BAAC,WAAU;;;;;;sCAChB,6LAAC;sCAAE;;;;;;;;;;;;;;;;;;;;;;;AAMf;KAhCa","debugId":null}},
    {"offset": {"line": 271, "column": 0}, "map": {"version":3,"sources":["file:///Users/vinitha/Desktop/RegAI/frontend/src/app/components/Timeline.tsx"],"sourcesContent":["import { CalendarCheck, Info } from 'lucide-react';\nimport { KeyDate } from '@/lib/types';\nimport { add } from 'date-fns';\n\n/**\n * DEFINITIVE, ROBUST DATE NORMALIZER\n * Converts various human-readable date strings into a sortable number (milliseconds).\n * It uses a prioritized, multi-pass approach to handle all observed formats correctly.\n */\nfunction normalizeDateForSorting(dateStr: string): number {\n    if (!dateStr || typeof dateStr !== 'string') {\n        return Infinity; // Push invalid data to the end\n    }\n    \n    const lowerDateStr = dateStr.toLowerCase().trim();\n\n    // --- Pass 1: Handle relative timelines (\"18-Month\", \"24 Months\", etc.) ---\n    // These are placed in the far future for sorting purposes.\n    const relativeMatch = lowerDateStr.match(/(\\d+)\\s*-?\\s*month/);\n    if (relativeMatch) {\n        const value = parseInt(relativeMatch[1], 10);\n        // Sort relative to a fixed future date to group them together correctly\n        return add(new Date('2100-01-01'), { months: value }).getTime();\n    }\n\n    // --- Pass 2: Handle fuzzy \"End of YYYY\" formats ---\n    const endOfYearMatch = lowerDateStr.match(/end of (\\d{4})/);\n    if (endOfYearMatch) {\n        const year = parseInt(endOfYearMatch[1], 10);\n        return new Date(year, 11, 31).getTime(); // December 31st\n    }\n\n    // --- Pass 3: Handle standalone years like \"2019\" ---\n    const standaloneYearMatch = lowerDateStr.match(/^(\\d{4})$/);\n    if (standaloneYearMatch) {\n        const year = parseInt(standaloneYearMatch[1], 10);\n        return new Date(year, 0, 1).getTime(); // January 1st\n    }\n\n    // --- Pass 4: Final attempt to parse as a standard date ---\n    // This handles \"8 June 2016\", \"August 2022\", and \"YYYY-MM-DD\" formats.\n    const parsedDate = new Date(dateStr);\n    if (!isNaN(parsedDate.getTime())) {\n        return parsedDate.getTime();\n    }\n    \n    // If no format matches, push it to the very end of the list.\n    return Infinity;\n}\n\n\nexport const Timeline = ({ dates }: { dates: KeyDate[] }) => {\n  if (!dates || dates.length === 0) {\n    return (\n       <div className=\"bg-white p-6 rounded-lg shadow-md border border-gray-200\">\n         <h2 className=\"text-2xl font-bold text-gray-800 mb-4 flex items-center\">\n           <CalendarCheck className=\"mr-3 text-green-600\" /> Integrated Roadmap\n         </h2>\n         <div className=\"flex items-center text-gray-500\">\n            <Info className=\"w-5 h-5 mr-2\"/>\n            <p>No key dates were extracted from this document.</p>\n         </div>\n       </div>\n    );\n  }\n\n  // Use the new, robust sorting function.\n  const sortedDates = [...dates]\n    .filter(item => item && item.date && item.event)\n    .sort((a, b) => normalizeDateForSorting(a.date) - normalizeDateForSorting(b.date));\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md border border-gray-200\">\n      <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center\">\n        <CalendarCheck className=\"mr-3 text-green-600\" /> Integrated Roadmap\n      </h2>\n      <div className=\"relative border-l-2 border-gray-300 ml-4\">\n        {sortedDates.map((item, index) => (\n          <div key={`${item.date}-${item.event.slice(0, 20)}-${index}`} className=\"mb-8 ml-8\">\n            <span className=\"absolute -left-[11px] flex items-center justify-center w-6 h-6 bg-blue-600 rounded-full ring-4 ring-white\">\n              <CalendarCheck className=\"w-3 h-3 text-white\" />\n            </span>\n            <div className=\"bg-gray-50 p-4 rounded-lg border border-gray-200\">\n              <time className=\"text-sm font-semibold text-blue-700 capitalize\">\n                {/* Display the original, human-readable date string from the LLM */}\n                {item.date}\n              </time>\n              <h3 className=\"text-lg font-semibold text-gray-900 mt-1\">{item.regulation}</h3>\n              <p className=\"text-base font-normal text-gray-600\">{item.event}</p>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};"],"names":[],"mappings":";;;;AAAA;AAAA;AAEA;;;;AAEA;;;;CAIC,GACD,SAAS,wBAAwB,OAAe;IAC5C,IAAI,CAAC,WAAW,OAAO,YAAY,UAAU;QACzC,OAAO,UAAU,+BAA+B;IACpD;IAEA,MAAM,eAAe,QAAQ,WAAW,GAAG,IAAI;IAE/C,4EAA4E;IAC5E,2DAA2D;IAC3D,MAAM,gBAAgB,aAAa,KAAK,CAAC;IACzC,IAAI,eAAe;QACf,MAAM,QAAQ,SAAS,aAAa,CAAC,EAAE,EAAE;QACzC,wEAAwE;QACxE,OAAO,CAAA,GAAA,qIAAA,CAAA,MAAG,AAAD,EAAE,IAAI,KAAK,eAAe;YAAE,QAAQ;QAAM,GAAG,OAAO;IACjE;IAEA,qDAAqD;IACrD,MAAM,iBAAiB,aAAa,KAAK,CAAC;IAC1C,IAAI,gBAAgB;QAChB,MAAM,OAAO,SAAS,cAAc,CAAC,EAAE,EAAE;QACzC,OAAO,IAAI,KAAK,MAAM,IAAI,IAAI,OAAO,IAAI,gBAAgB;IAC7D;IAEA,sDAAsD;IACtD,MAAM,sBAAsB,aAAa,KAAK,CAAC;IAC/C,IAAI,qBAAqB;QACrB,MAAM,OAAO,SAAS,mBAAmB,CAAC,EAAE,EAAE;QAC9C,OAAO,IAAI,KAAK,MAAM,GAAG,GAAG,OAAO,IAAI,cAAc;IACzD;IAEA,4DAA4D;IAC5D,uEAAuE;IACvE,MAAM,aAAa,IAAI,KAAK;IAC5B,IAAI,CAAC,MAAM,WAAW,OAAO,KAAK;QAC9B,OAAO,WAAW,OAAO;IAC7B;IAEA,6DAA6D;IAC7D,OAAO;AACX;AAGO,MAAM,WAAW,CAAC,EAAE,KAAK,EAAwB;IACtD,IAAI,CAAC,SAAS,MAAM,MAAM,KAAK,GAAG;QAChC,qBACG,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;;sCACZ,6LAAC,2NAAA,CAAA,gBAAa;4BAAC,WAAU;;;;;;wBAAwB;;;;;;;8BAEnD,6LAAC;oBAAI,WAAU;;sCACZ,6LAAC,qMAAA,CAAA,OAAI;4BAAC,WAAU;;;;;;sCAChB,6LAAC;sCAAE;;;;;;;;;;;;;;;;;;IAIb;IAEA,wCAAwC;IACxC,MAAM,cAAc;WAAI;KAAM,CAC3B,MAAM,CAAC,CAAA,OAAQ,QAAQ,KAAK,IAAI,IAAI,KAAK,KAAK,EAC9C,IAAI,CAAC,CAAC,GAAG,IAAM,wBAAwB,EAAE,IAAI,IAAI,wBAAwB,EAAE,IAAI;IAElF,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;;kCACZ,6LAAC,2NAAA,CAAA,gBAAa;wBAAC,WAAU;;;;;;oBAAwB;;;;;;;0BAEnD,6LAAC;gBAAI,WAAU;0BACZ,YAAY,GAAG,CAAC,CAAC,MAAM,sBACtB,6LAAC;wBAA6D,WAAU;;0CACtE,6LAAC;gCAAK,WAAU;0CACd,cAAA,6LAAC,2NAAA,CAAA,gBAAa;oCAAC,WAAU;;;;;;;;;;;0CAE3B,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDAEb,KAAK,IAAI;;;;;;kDAEZ,6LAAC;wCAAG,WAAU;kDAA4C,KAAK,UAAU;;;;;;kDACzE,6LAAC;wCAAE,WAAU;kDAAuC,KAAK,KAAK;;;;;;;;;;;;;uBAVxD,GAAG,KAAK,IAAI,CAAC,CAAC,EAAE,KAAK,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,EAAE,OAAO;;;;;;;;;;;;;;;;AAiBtE;KA5Ca","debugId":null}},
    {"offset": {"line": 479, "column": 0}, "map": {"version":3,"sources":["file:///Users/vinitha/Desktop/RegAI/frontend/src/app/components/DocumentSelector.tsx"],"sourcesContent":["'use client';\nimport * as Select from '@radix-ui/react-select';\nimport { Check, ChevronDown } from 'lucide-react';\n\ninterface DocumentSelectorProps {\n  documents: string[];\n  selectedDocument: string;\n  onSelectDocument: (doc: string) => void;\n  isLoading: boolean;\n}\n\nexport const DocumentSelector = ({ documents, selectedDocument, onSelectDocument, isLoading }: DocumentSelectorProps) => (\n  // Use max-w-full to ensure it behaves well on small screens, and a specific max-width for larger screens.\n  <div className=\"w-full max-w-md\">\n    <Select.Root value={selectedDocument} onValueChange={onSelectDocument} disabled={isLoading}>\n      <Select.Trigger \n        className=\"inline-flex items-center justify-between rounded-md px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 shadow-sm hover:bg-gray-50 disabled:bg-gray-200 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 w-full\"\n        aria-label=\"Select Document\"\n      >\n        <span className=\"truncate\"> {/* Add truncate to prevent ugly text wrapping */}\n            <Select.Value placeholder=\"Select a document to analyze...\" />\n        </span>\n        <Select.Icon className=\"ml-2\">\n          <ChevronDown className=\"h-4 w-4\" />\n        </Select.Icon>\n      </Select.Trigger>\n      <Select.Portal>\n        <Select.Content \n          position=\"popper\" \n          sideOffset={5} \n          className=\"w-[--radix-select-trigger-width] bg-white rounded-md shadow-lg border z-50\"\n        >\n          <Select.Viewport className=\"p-1\">\n            {documents.map(doc => (\n              <Select.Item \n                key={doc} \n                value={doc} \n                className=\"flex items-center px-3 py-2 text-sm text-gray-700 rounded-md relative hover:bg-blue-50 cursor-pointer select-none outline-none data-[highlighted]:bg-blue-100 data-[state=checked]:font-semibold\"\n              >\n                <Select.ItemText>{doc}</Select.ItemText>\n                <Select.ItemIndicator className=\"absolute right-2 inline-flex items-center\">\n                  <Check className=\"h-4 w-4\" />\n                </Select.ItemIndicator>\n              </Select.Item>\n            ))}\n          </Select.Viewport>\n        </Select.Content>\n      </Select.Portal>\n    </Select.Root>\n  </div>\n);"],"names":[],"mappings":";;;;AACA;AACA;AAAA;AAFA;;;;AAWO,MAAM,mBAAmB,CAAC,EAAE,SAAS,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,SAAS,EAAyB,GAClH,0GAA0G;kBAC1G,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC,qKAAA,CAAA,OAAW;YAAC,OAAO;YAAkB,eAAe;YAAkB,UAAU;;8BAC/E,6LAAC,qKAAA,CAAA,UAAc;oBACb,WAAU;oBACV,cAAW;;sCAEX,6LAAC;4BAAK,WAAU;;gCAAW;8CACvB,6LAAC,qKAAA,CAAA,QAAY;oCAAC,aAAY;;;;;;;;;;;;sCAE9B,6LAAC,qKAAA,CAAA,OAAW;4BAAC,WAAU;sCACrB,cAAA,6LAAC,uNAAA,CAAA,cAAW;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAG3B,6LAAC,qKAAA,CAAA,SAAa;8BACZ,cAAA,6LAAC,qKAAA,CAAA,UAAc;wBACb,UAAS;wBACT,YAAY;wBACZ,WAAU;kCAEV,cAAA,6LAAC,qKAAA,CAAA,WAAe;4BAAC,WAAU;sCACxB,UAAU,GAAG,CAAC,CAAA,oBACb,6LAAC,qKAAA,CAAA,OAAW;oCAEV,OAAO;oCACP,WAAU;;sDAEV,6LAAC,qKAAA,CAAA,WAAe;sDAAE;;;;;;sDAClB,6LAAC,qKAAA,CAAA,gBAAoB;4CAAC,WAAU;sDAC9B,cAAA,6LAAC,uMAAA,CAAA,QAAK;gDAAC,WAAU;;;;;;;;;;;;mCANd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAxBR","debugId":null}},
    {"offset": {"line": 615, "column": 0}, "map": {"version":3,"sources":["file:///Users/vinitha/Desktop/RegAI/frontend/src/app/components/Accordion.tsx"],"sourcesContent":["'use client';\nimport { useState, type PropsWithChildren, type ReactNode } from 'react';\nimport { ChevronDown } from 'lucide-react';\n\ninterface AccordionProps {\n  title: ReactNode;\n}\n\nexport const Accordion = ({ title, children }: PropsWithChildren<AccordionProps>) => {\n  const [isOpen, setIsOpen] = useState(false);\n  return (\n    <div className=\"bg-white rounded-lg shadow-md border border-gray-200\">\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"flex justify-between items-center w-full p-6 text-left\"\n      >\n        <div className=\"flex items-center\">\n            {title}\n        </div>\n        <ChevronDown\n          className={`transform transition-transform duration-200 ${isOpen ? 'rotate-180' : ''}`}\n        />\n      </button>\n      {isOpen && (\n        <div className=\"p-6 border-t border-gray-200\">\n            {children}\n        </div>\n      )}\n    </div>\n  );\n};"],"names":[],"mappings":";;;;AACA;AACA;;;AAFA;;;AAQO,MAAM,YAAY,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAqC;;IAC9E,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACC,SAAS,IAAM,UAAU,CAAC;gBAC1B,WAAU;;kCAEV,6LAAC;wBAAI,WAAU;kCACV;;;;;;kCAEL,6LAAC,uNAAA,CAAA,cAAW;wBACV,WAAW,CAAC,4CAA4C,EAAE,SAAS,eAAe,IAAI;;;;;;;;;;;;YAGzF,wBACC,6LAAC;gBAAI,WAAU;0BACV;;;;;;;;;;;;AAKb;GAtBa;KAAA","debugId":null}},
    {"offset": {"line": 685, "column": 0}, "map": {"version":3,"sources":["file:///Users/vinitha/Desktop/RegAI/frontend/src/app/components/ChatAssistant.tsx"],"sourcesContent":["'use client';\nimport { useState, useRef, useEffect, FormEvent } from 'react';\nimport { Bot, User, Send, Loader2 } from 'lucide-react';\n\ninterface Message {\n  id: string;\n  role: 'user' | 'ai' | 'error';\n  text: string;\n}\n\nexport const ChatAssistant = () => {\n    const [messages, setMessages] = useState<Message[]>([]);\n    const [input, setInput] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n    const messagesEndRef = useRef<HTMLDivElement>(null);\n\n    const scrollToBottom = () => {\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n    };\n\n    useEffect(scrollToBottom, [messages]);\n\n    const handleSubmit = async (e: FormEvent) => {\n        e.preventDefault();\n        if (!input.trim() || isLoading) return;\n\n        const userMessage: Message = { id: Date.now().toString(), role: 'user', text: input };\n        setMessages(prev => [...prev, userMessage]);\n        setIsLoading(true);\n        setInput('');\n\n        try {\n            const res = await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/api/chat`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ question: input }),\n            });\n\n            if (!res.ok) {\n                throw new Error('Failed to get a response from the assistant.');\n            }\n\n            const data = await res.json();\n            const aiMessage: Message = { id: (Date.now() + 1).toString(), role: 'ai', text: data.answer };\n            setMessages(prev => [...prev, aiMessage]);\n\n        } catch (error) {\n            const errorMessage: Message = { id: (Date.now() + 1).toString(), role: 'error', text: 'Sorry, something went wrong. Please try again.' };\n            setMessages(prev => [...prev, errorMessage]);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"flex flex-col h-[60vh] bg-gray-50 rounded-lg border\">\n            <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n                {messages.map(msg => (\n                    <div key={msg.id} className={`flex items-start gap-3 ${msg.role === 'user' ? 'justify-end' : ''}`}>\n                        {msg.role !== 'user' && (\n                            <div className={`p-2 rounded-full text-white ${msg.role === 'ai' ? 'bg-blue-600' : 'bg-red-600'}`}>\n                                <Bot size={20} />\n                            </div>\n                        )}\n                        <div className={`max-w-xl p-3 rounded-lg ${\n                            msg.role === 'user' ? 'bg-blue-500 text-white' : \n                            msg.role === 'ai' ? 'bg-white border' : \n                            'bg-red-100 text-red-800'\n                        }`}>\n                            <p>{msg.text}</p>\n                        </div>\n                        {msg.role === 'user' && (\n                           <div className=\"p-2 rounded-full bg-gray-300 text-gray-700\">\n                               <User size={20}/>\n                           </div>\n                        )}\n                    </div>\n                ))}\n                 {isLoading && (\n                    <div className=\"flex items-start gap-3\">\n                        <div className=\"p-2 rounded-full bg-blue-600 text-white animate-pulse\">\n                           <Bot size={20}/>\n                        </div>\n                       <div className=\"bg-white border p-3 rounded-lg flex items-center gap-2\">\n                           <Loader2 className=\"animate-spin\" size={20}/>\n                           <span>Thinking...</span>\n                       </div>\n                    </div>\n                 )}\n                <div ref={messagesEndRef} />\n            </div>\n            <form onSubmit={handleSubmit} className=\"p-4 border-t bg-white flex items-center gap-3\">\n                <input\n                    type=\"text\"\n                    value={input}\n                    onChange={(e) => setInput(e.target.value)}\n                    placeholder=\"Ask a question about any document...\"\n                    className=\"flex-1 p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none\"\n                    disabled={isLoading}\n                />\n                <button type=\"submit\" disabled={isLoading} className=\"p-2 bg-blue-600 text-white rounded-lg disabled:bg-gray-400 hover:bg-blue-700\">\n                    <Send size={20}/>\n                </button>\n            </form>\n        </div>\n    );\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 940, "column": 0}, "map": {"version":3,"sources":["file:///Users/vinitha/Desktop/RegAI/frontend/src/app/page.tsx"],"sourcesContent":["'use client';\nimport { useState, useEffect } from 'react';\nimport { AnalysisResult } from '@/app/lib/types';\nimport { RegulatorySummary } from '@/app/components/RegulatorySummary';\nimport { ImpactAssessment } from '@/app/components/ImpactAssessment';\nimport { Timeline } from '@/app/components/Timeline';\nimport { DocumentSelector } from '@/app/components/DocumentSelector';\nimport { Loader2, MessageSquare } from 'lucide-react';\n// Import the new components\nimport { Accordion } from '@/app/components/Accordion';\nimport { ChatAssistant } from '@/app/components/ChatAssistant';\n\nexport default function Home() {\n  const [documents, setDocuments] = useState<string[]>([]);\n  const [selectedDocument, setSelectedDocument] = useState<string>('');\n  const [analysis, setAnalysis] = useState<AnalysisResult | null>(null);\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchDocuments = async () => {\n      try {\n        const res = await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/api/documents`);\n        if (!res.ok) throw new Error('Failed to fetch documents from the server.');\n        const data = await res.json();\n        setDocuments(data.documents);\n        if (data.documents.length > 0) {\n          setSelectedDocument(data.documents[0]); \n        }\n      } catch (e) {\n        setError(e instanceof Error ? e.message : 'An unknown error occurred while fetching documents.');\n      }\n    };\n    fetchDocuments();\n  }, []);\n\n  useEffect(() => {\n    if (selectedDocument) {\n      const fetchAnalysis = async () => {\n        setIsLoading(true);\n        setError(null);\n        setAnalysis(null);\n        try {\n          const res = await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/api/analyze`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ document_name: selectedDocument }),\n          });\n          if (!res.ok) {\n            const errData = await res.json();\n            throw new Error(errData.detail || 'Failed to fetch analysis.');\n          }\n          const data: AnalysisResult = await res.json();\n          setAnalysis(data);\n        } catch (e) {\n          setError(e instanceof Error ? e.message : 'An unknown error occurred during analysis.');\n        } finally {\n          setIsLoading(false);\n        }\n      };\n      fetchAnalysis();\n    }\n  }, [selectedDocument]);\n\n  return (\n    <main className=\"bg-gray-50 min-h-screen p-4 sm:p-8\">\n      <div className=\"max-w-7xl mx-auto space-y-8\">\n        <header className=\"p-4 bg-white rounded-lg shadow-sm border border-gray-200\">\n          <h1 className=\"text-4xl font-bold text-gray-800 tracking-tight\">AI Regulatory Review</h1>\n          <p className=\"text-lg text-gray-600 mt-2\">Automated insights from financial regulatory documents.</p>\n        </header>\n\n        <div className=\"flex flex-col sm:flex-row items-start sm:items-center space-y-4 sm:space-y-0 sm:space-x-4\">\n          <label className=\"text-lg font-semibold text-gray-700\" htmlFor=\"doc-selector\">Select Document for Analysis:</label>\n          <DocumentSelector \n            documents={documents}\n            selectedDocument={selectedDocument}\n            onSelectDocument={setSelectedDocument}\n            isLoading={isLoading}\n          />\n        </div>\n\n        {isLoading && (\n          <div className=\"flex flex-col items-center justify-center p-12 bg-white rounded-lg shadow-md border\">\n            <Loader2 className=\"h-12 w-12 text-blue-600 animate-spin\" />\n            <p className=\"mt-4 text-lg text-gray-700 font-semibold\">Analyzing {selectedDocument}...</p>\n          </div>\n        )}\n\n        {error && !isLoading && (\n            <div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md\" role=\"alert\">\n                <p className=\"font-bold\">Analysis Error</p>\n                <p>{error}</p>\n            </div>\n        )}\n\n        {analysis && !isLoading && (\n          <div className=\"grid grid-cols-1 gap-8\">\n            <RegulatorySummary summary={analysis.regulatorySummary} />\n            <ImpactAssessment assessment={analysis.impactAssessment} />\n            <Timeline dates={analysis.keyDates} />\n          </div>\n        )}\n\n        {/* --- ADD THE NEW CHAT ASSISTANT --- */}\n        <Accordion \n            title={\n                <h2 className=\"text-2xl font-bold text-gray-800 flex items-center\">\n                    <MessageSquare className=\"mr-3 text-blue-600\" /> AI Chat Assistant\n                </h2>\n            }\n        >\n            <ChatAssistant />\n        </Accordion>\n\n      </div>\n    </main>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}