{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/vinitha/Desktop/RegAI/frontend/src/app/components/RegulatorySummary.tsx"],"sourcesContent":["import { FileText } from 'lucide-react';\nimport { RegulatorySummary as SummaryType } from '@/app/lib/types';\n\nconst FallbackText = () => (\n    <span className=\"italic text-gray-400\">Analysis did not provide this information.</span>\n);\n\nexport const RegulatorySummary = ({ summary }: { summary: SummaryType }) => (\n  <div className=\"bg-white p-6 rounded-lg shadow-md border border-gray-200\">\n    <h2 className=\"text-2xl font-bold text-gray-800 mb-4 flex items-center\">\n      <FileText className=\"mr-3 text-blue-600\" /> Regulatory Summary\n    </h2>\n    <div className=\"space-y-4 text-gray-700\">\n      <div>\n        <h3 className=\"font-semibold text-lg text-gray-800\">Purpose</h3>\n        {/* Use optional chaining and a fallback component */}\n        <p>{summary?.purpose || <FallbackText />}</p>\n      </div>\n      <div>\n        <h3 className=\"font-semibold text-lg text-gray-800\">Scope</h3>\n        <p>{summary?.scope || <FallbackText />}</p>\n      </div>\n      <div>\n        <h3 className=\"font-semibold text-lg text-gray-800\">Why It Matters</h3>\n        <p>{summary?.relevance || <FallbackText />}</p>\n      </div>\n    </div>\n  </div>\n);"],"names":[],"mappings":";;;;AAAA;;;AAGA,MAAM,eAAe,kBACjB,6LAAC;QAAK,WAAU;kBAAuB;;;;;;KADrC;AAIC,MAAM,oBAAoB,CAAC,EAAE,OAAO,EAA4B,iBACrE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;;kCACZ,6LAAC,iNAAA,CAAA,WAAQ;wBAAC,WAAU;;;;;;oBAAuB;;;;;;;0BAE7C,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAAsC;;;;;;0CAEpD,6LAAC;0CAAG,SAAS,yBAAW,6LAAC;;;;;;;;;;;;;;;;kCAE3B,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAAsC;;;;;;0CACpD,6LAAC;0CAAG,SAAS,uBAAS,6LAAC;;;;;;;;;;;;;;;;kCAEzB,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAAsC;;;;;;0CACpD,6LAAC;0CAAG,SAAS,2BAAa,6LAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAjBtB","debugId":null}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///Users/vinitha/Desktop/RegAI/frontend/src/app/components/ImpactAssessment.tsx"],"sourcesContent":["import { AlertTriangle, Info } from 'lucide-react';\nimport { ImpactAssessment as AssessmentType } from '@/app/lib/types';\n\nexport const ImpactAssessment = ({ assessment }: { assessment: AssessmentType }) => {\n  // Defensive check: Ensure assessment and affectedAreas exist and have content\n  const hasContent = assessment?.affectedAreas && assessment.affectedAreas.length > 0;\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md border border-gray-200\">\n      <h2 className=\"text-2xl font-bold text-gray-800 mb-4 flex items-center\">\n        <AlertTriangle className=\"mr-3 text-yellow-500\" /> Preliminary Impact Assessment\n      </h2>\n      <p className=\"text-gray-600 italic mb-6\">\n        {assessment?.introduction || \"An analysis of potential operational impacts.\"}\n      </p>\n      <div className=\"space-y-4\">\n        {hasContent ? (\n          assessment.affectedAreas.map((item, index) => (\n            <div key={`${item.area}-${index}`} className=\"border-l-4 border-yellow-500 pl-4\">\n              <h3 className=\"font-semibold text-lg text-gray-800\">{item.area}</h3>\n              <p className=\"text-gray-700\">\n                {/* Provide a fallback for the impact description itself */}\n                {item.impact || <span className=\"italic text-gray-400\">No description provided.</span>}\n              </p>\n            </div>\n          ))\n        ) : (\n          <div className=\"flex items-center text-gray-500\">\n            <Info className=\"w-5 h-5 mr-2 shrink-0\"/>\n            <p>No specific impact areas were identified in the analysis.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;AAAA;AAAA;;;AAGO,MAAM,mBAAmB,CAAC,EAAE,UAAU,EAAkC;IAC7E,8EAA8E;IAC9E,MAAM,aAAa,YAAY,iBAAiB,WAAW,aAAa,CAAC,MAAM,GAAG;IAElF,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;;kCACZ,6LAAC,2NAAA,CAAA,gBAAa;wBAAC,WAAU;;;;;;oBAAyB;;;;;;;0BAEpD,6LAAC;gBAAE,WAAU;0BACV,YAAY,gBAAgB;;;;;;0BAE/B,6LAAC;gBAAI,WAAU;0BACZ,aACC,WAAW,aAAa,CAAC,GAAG,CAAC,CAAC,MAAM,sBAClC,6LAAC;wBAAkC,WAAU;;0CAC3C,6LAAC;gCAAG,WAAU;0CAAuC,KAAK,IAAI;;;;;;0CAC9D,6LAAC;gCAAE,WAAU;0CAEV,KAAK,MAAM,kBAAI,6LAAC;oCAAK,WAAU;8CAAuB;;;;;;;;;;;;uBAJjD,GAAG,KAAK,IAAI,CAAC,CAAC,EAAE,OAAO;;;;8CASnC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,qMAAA,CAAA,OAAI;4BAAC,WAAU;;;;;;sCAChB,6LAAC;sCAAE;;;;;;;;;;;;;;;;;;;;;;;AAMf;KAhCa","debugId":null}},
    {"offset": {"line": 271, "column": 0}, "map": {"version":3,"sources":["file:///Users/vinitha/Desktop/RegAI/frontend/src/app/components/Timeline.tsx"],"sourcesContent":["import { CalendarCheck, AlertTriangle, ShieldCheck, Clock } from 'lucide-react';\nimport { KeyDate } from '@/app/lib/types';\nimport { differenceInMonths, parse, isValid } from 'date-fns';\n\ninterface StyleProps {\n  borderColor: string;\n  iconBgColor: string;\n  textColor: string;\n  icon: React.ElementType;\n}\n\n/**\n * Parses a date string safely for styling purposes, handling ranges and fuzzy dates.\n * It primarily looks for the first parseable part of the string.\n */\nfunction parseDateForStyle(dateStr: string): Date | null {\n  if (!dateStr || typeof dateStr !== 'string') return null;\n  \n  const cleanDateStr = dateStr.split(' - ')[0].trim(); // Isolate the start date for ranges\n  \n  // Try parsing common formats. date-fns' `parse` is more forgiving than the native `new Date()`\n  try {\n    const parsed = parse(cleanDateStr, 'd MMMM yyyy', new Date());\n    if (isValid(parsed)) return parsed;\n    \n    const parsedMonth = parse(cleanDateStr, 'MMMM yyyy', new Date());\n    if (isValid(parsedMonth)) return parsedMonth;\n    \n    const parsedYear = parse(cleanDateStr, 'yyyy', new Date());\n    if (isValid(parsedYear)) return parsedYear;\n  } catch (e) { /* Fallback to general parsing */ }\n\n  const generalParsed = new Date(cleanDateStr);\n  return isValid(generalParsed) ? generalParsed : null;\n}\n\n/**\n * Returns Tailwind CSS classes and an icon based on the date's status.\n */\nfunction getTimelineItemStyle(dateStr: string): StyleProps {\n  const date = parseDateForStyle(dateStr);\n  const now = new Date();\n  now.setHours(0, 0, 0, 0); // Normalize 'now' to the start of the day\n\n  const defaultStyle: StyleProps = {\n    borderColor: 'border-blue-500',\n    iconBgColor: 'bg-blue-500',\n    textColor: 'text-blue-700',\n    icon: Clock,\n  };\n  \n  if (!date) return defaultStyle; // Return default for relative dates like \"24 Months\"\n  \n  const monthsDiff = differenceInMonths(date, now);\n\n  if (date < now) {\n    // Past\n    return { borderColor: 'border-gray-400', iconBgColor: 'bg-gray-400', textColor: 'text-gray-600', icon: ShieldCheck };\n  }\n  if (monthsDiff <= 6) {\n    // Due within 6 months\n    return { borderColor: 'border-red-500', iconBgColor: 'bg-red-500', textColor: 'text-red-700', icon: AlertTriangle };\n  }\n  if (monthsDiff <= 12) {\n    // Due within 1 year\n    return { borderColor: 'border-orange-500', iconBgColor: 'bg-orange-500', textColor: 'text-orange-700', icon: AlertTriangle };\n  }\n  // Future (more than a year away)\n  return { borderColor: 'border-green-500', iconBgColor: 'bg-green-500', textColor: 'text-green-700', icon: Clock };\n}\n\nexport const Timeline = ({ dates }: { dates: KeyDate[] }) => {\n  // If dates are empty or not an array, show the fallback UI\n  if (!Array.isArray(dates) || dates.length === 0) {\n    return <div className=\"p-6 bg-white rounded-lg shadow-md border\"><p className=\"text-gray-500\">No key dates were extracted for this document.</p></div>;\n  }\n\n  // NO MORE SORTING ON THE FRONTEND! We trust the backend's order.\n  const timelineDates = dates.filter(item => item && item.date && item.event);\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md border border-gray-200\">\n      <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center\">\n        <CalendarCheck className=\"mr-3 text-gray-700\" /> Critical Compliance Dates\n      </h2>\n      <div className=\"relative border-l-2 border-gray-300 ml-4\">\n        {timelineDates.map((item, index) => {\n          const { borderColor, iconBgColor, textColor, icon: Icon } = getTimelineItemStyle(item.date);\n          \n          return (\n            <div key={`${item.date}-${index}`} className=\"mb-8 ml-8\">\n              <span className={`absolute -left-[11px] flex items-center justify-center w-6 h-6 ${iconBgColor} rounded-full ring-4 ring-white`}>\n                <Icon className=\"w-3.5 h-3.5 text-white\" />\n              </span>\n              <div className={`bg-gray-50 p-4 rounded-lg border-l-4 ${borderColor}`}>\n                <time className={`text-sm font-bold ${textColor} capitalize`}>\n                  {item.date}\n                </time>\n                <h3 className=\"text-lg font-semibold text-gray-900 mt-1\">{item.regulation}</h3>\n                <p className=\"text-base font-normal text-gray-600\">{item.event}</p>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 478, "column": 0}, "map": {"version":3,"sources":["file:///Users/vinitha/Desktop/RegAI/frontend/src/app/components/DocumentSelector.tsx"],"sourcesContent":["'use client';\nimport * as Select from '@radix-ui/react-select';\nimport { Check, ChevronDown } from 'lucide-react';\n\ninterface DocumentSelectorProps {\n  documents: string[];\n  selectedDocument: string;\n  onSelectDocument: (doc: string) => void;\n  isLoading: boolean;\n}\n\nexport const DocumentSelector = ({ documents, selectedDocument, onSelectDocument, isLoading }: DocumentSelectorProps) => (\n  // Use max-w-full to ensure it behaves well on small screens, and a specific max-width for larger screens.\n  <div className=\"w-full max-w-md\">\n    <Select.Root value={selectedDocument} onValueChange={onSelectDocument} disabled={isLoading}>\n      <Select.Trigger \n        className=\"inline-flex items-center justify-between rounded-md px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 shadow-sm hover:bg-gray-50 disabled:bg-gray-200 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 w-full\"\n        aria-label=\"Select Document\"\n      >\n        <span className=\"truncate\"> {/* Add truncate to prevent ugly text wrapping */}\n            <Select.Value placeholder=\"Select a document to analyze...\" />\n        </span>\n        <Select.Icon className=\"ml-2\">\n          <ChevronDown className=\"h-4 w-4\" />\n        </Select.Icon>\n      </Select.Trigger>\n      <Select.Portal>\n        <Select.Content \n          position=\"popper\" \n          sideOffset={5} \n          className=\"w-[--radix-select-trigger-width] bg-white rounded-md shadow-lg border z-50\"\n        >\n          <Select.Viewport className=\"p-1\">\n            {documents.map(doc => (\n              <Select.Item \n                key={doc} \n                value={doc} \n                className=\"flex items-center px-3 py-2 text-sm text-gray-700 rounded-md relative hover:bg-red-50 cursor-pointer select-none outline-none data-[highlighted]:bg-red-100 data-[state=checked]:font-semibold\"\n              >\n                <Select.ItemText>{doc}</Select.ItemText>\n                <Select.ItemIndicator className=\"absolute right-2 inline-flex items-center\">\n                  <Check className=\"h-4 w-4\" />\n                </Select.ItemIndicator>\n              </Select.Item>\n            ))}\n          </Select.Viewport>\n        </Select.Content>\n      </Select.Portal>\n    </Select.Root>\n  </div>\n);"],"names":[],"mappings":";;;;AACA;AACA;AAAA;AAFA;;;;AAWO,MAAM,mBAAmB,CAAC,EAAE,SAAS,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,SAAS,EAAyB,GAClH,0GAA0G;kBAC1G,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC,qKAAA,CAAA,OAAW;YAAC,OAAO;YAAkB,eAAe;YAAkB,UAAU;;8BAC/E,6LAAC,qKAAA,CAAA,UAAc;oBACb,WAAU;oBACV,cAAW;;sCAEX,6LAAC;4BAAK,WAAU;;gCAAW;8CACvB,6LAAC,qKAAA,CAAA,QAAY;oCAAC,aAAY;;;;;;;;;;;;sCAE9B,6LAAC,qKAAA,CAAA,OAAW;4BAAC,WAAU;sCACrB,cAAA,6LAAC,uNAAA,CAAA,cAAW;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAG3B,6LAAC,qKAAA,CAAA,SAAa;8BACZ,cAAA,6LAAC,qKAAA,CAAA,UAAc;wBACb,UAAS;wBACT,YAAY;wBACZ,WAAU;kCAEV,cAAA,6LAAC,qKAAA,CAAA,WAAe;4BAAC,WAAU;sCACxB,UAAU,GAAG,CAAC,CAAA,oBACb,6LAAC,qKAAA,CAAA,OAAW;oCAEV,OAAO;oCACP,WAAU;;sDAEV,6LAAC,qKAAA,CAAA,WAAe;sDAAE;;;;;;sDAClB,6LAAC,qKAAA,CAAA,gBAAoB;4CAAC,WAAU;sDAC9B,cAAA,6LAAC,uMAAA,CAAA,QAAK;gDAAC,WAAU;;;;;;;;;;;;mCANd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAxBR","debugId":null}},
    {"offset": {"line": 614, "column": 0}, "map": {"version":3,"sources":["file:///Users/vinitha/Desktop/RegAI/frontend/src/app/review/page.tsx"],"sourcesContent":["'use client';\nimport { useState, useEffect } from 'react';\nimport { AnalysisResult } from '@/app/lib/types';\nimport { RegulatorySummary } from '@/app/components/RegulatorySummary';\nimport { ImpactAssessment } from '@/app/components/ImpactAssessment';\nimport { Timeline } from '@/app/components/Timeline';\nimport { DocumentSelector } from '@/app/components/DocumentSelector';\n\nimport { Loader2, Search, Info } from 'lucide-react';\n\nexport default function ReviewPage() {\n  const [documents, setDocuments] = useState<string[]>([]);\n  const [selectedDocument, setSelectedDocument] = useState<string>('');\n  \n  // --- CACHING AND UI STATE CHANGES ---\n  const [analysis, setAnalysis] = useState<AnalysisResult | null>(null);\n  const [analysisCache, setAnalysisCache] = useState<Record<string, AnalysisResult>>({});\n  \n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // This effect runs only once to fetch the list of documents.\n  useEffect(() => {\n    const fetchDocuments = async () => {\n      try {\n        const res = await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/api/documents`);\n        if (!res.ok) throw new Error('Failed to fetch documents from the server.');\n        const data = await res.json();\n        setDocuments(data.documents);\n        // We no longer auto-select the first document.\n      } catch (e) {\n        setError(e instanceof Error ? e.message : 'An unknown error occurred while fetching documents.');\n      }\n    };\n    fetchDocuments();\n  }, []);\n\n  // Event handler for the new \"Analyze\" button\n  const handleAnalyzeClick = async () => {\n    if (!selectedDocument) {\n        setError(\"Please select a document first.\");\n        return;\n    }\n\n    // 1. Check the cache first\n    if (analysisCache[selectedDocument]) {\n        console.log(\"Loading analysis from cache...\");\n        setAnalysis(analysisCache[selectedDocument]);\n        setError(null);\n        return;\n    }\n\n    // 2. If not in cache, fetch from the API\n    console.log(\"Fetching new analysis from API...\");\n    setIsLoading(true);\n    setError(null);\n    setAnalysis(null);\n    \n    try {\n        const res = await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/api/analyze`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ document_name: selectedDocument }),\n        });\n        \n        if (!res.ok) {\n            const errData = await res.json();\n            throw new Error(errData.detail || 'Failed to fetch analysis.');\n        }\n\n        const data: AnalysisResult = await res.json();\n        // Update both the current view and the cache\n        setAnalysis(data);\n        setAnalysisCache(prevCache => ({\n            ...prevCache,\n            [selectedDocument]: data,\n        }));\n    } catch (e) {\n        setError(e instanceof Error ? e.message : 'An unknown error occurred during analysis.');\n    } finally {\n        setIsLoading(false);\n    }\n  };\n  \n  // Clear analysis when a different document is selected\n  useEffect(() => {\n    setAnalysis(null);\n    setError(null);\n  }, [selectedDocument])\n\n  return (\n    <div className=\"max-w-7xl mx-auto space-y-8\">\n      <header className=\"p-4 bg-white rounded-lg shadow-sm border border-gray-200\">\n        <h1 className=\"text-3xl font-bold text-gray-800 tracking-tight\">AI Regulatory Review</h1>\n        <p className=\"text-lg text-gray-600 mt-2\">Generate summaries, impact assessments, and timelines from your documents.</p>\n      </header>\n\n      {/* --- NEW UI WITH \"ANALYZE\" BUTTON --- */}\n      <div className=\"flex flex-col sm:flex-row items-start sm:items-center space-y-4 sm:space-y-0 sm:space-x-4\">\n        <DocumentSelector \n          documents={documents}\n          selectedDocument={selectedDocument}\n          onSelectDocument={setSelectedDocument}\n          isLoading={isLoading}\n        />\n        <button \n            onClick={handleAnalyzeClick}\n            disabled={isLoading || !selectedDocument}\n            className=\"flex items-center justify-center px-4 py-2 bg-red-600 text-white font-semibold rounded-md shadow-sm hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors\"\n        >\n            <Search className=\"mr-2 h-5 w-5\" />\n            Analyze\n        </button>\n      </div>\n\n      {isLoading && (\n        <div className=\"flex flex-col items-center justify-center p-12 bg-white rounded-lg shadow-md border\">\n          <Loader2 className=\"h-12 w-12 text-red-600 animate-spin\" />\n          <p className=\"mt-4 text-lg text-gray-700 font-semibold\">Analyzing {selectedDocument}...</p>\n        </div>\n      )}\n\n      {error && !isLoading && (\n          <div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md\" role=\"alert\">\n              <p className=\"font-bold\">Error</p>\n              <p>{error}</p>\n          </div>\n      )}\n\n      {analysis && !isLoading && (\n        <div className=\"grid grid-cols-1 gap-8\">\n          {/* Conditionally render the heatmap if data is available */}\n          {analysis.heatmapData && <Heatmap data={analysis.heatmapData} />}\n          <RegulatorySummary summary={analysis.regulatorySummary} />\n          <ImpactAssessment assessment={analysis.impactAssessment} />\n          <Timeline dates={analysis.keyDates} />\n        </div>\n      )}\n\n      {/* --- NEW INITIAL STATE MESSAGE --- */}\n      {!analysis && !isLoading && !error && (\n        <div className=\"text-center p-12 bg-white rounded-lg shadow-md border\">\n            <Info className=\"mx-auto h-12 w-12 text-gray-400\" />\n            <h2 className=\"mt-2 text-xl font-semibold text-gray-700\">Ready for Analysis</h2>\n            <p className=\"text-gray-500 mt-1\">Please select a document from the dropdown and click \"Analyze\".</p>\n          </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}